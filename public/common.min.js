"use strict";
'use strict';

(function () {

    var data = 'data-src',
        images = document.querySelectorAll('[' + data + ']');

    var configuration = {
        root: null,
        rootMargin: '0px',
        threshold: 0.5
    };

    var imagesCount = images.length;

    var observer = !('IntersectionObserver' in window) ? loadBackgroundsImmediately(images) : initIntersectionObserver(onIntersection, configuration);

    function initIntersectionObserver(onIntersection, configuration) {
        observer = new IntersectionObserver(onIntersection, configuration);

        for (var i = 0; i < imagesCount; i++) {
            var image = images[i];
            observer.observe(image);
        }

        return observer;
    }

    function loadBackgroundsImmediately() {
        for (var i = 0; i < imagesCount; i++) {
            var image = imagesCount[l];

            preloadBackgrounds(image);
        }
    }

    function preloadBackgrounds(image) {
        var value = image.getAttribute(data),
            currentSection = image;

        currentSection.style.background = value;
        currentSection.removeAttribute(data);
    }

    function onIntersection(entries) {
        for (var i = 0, len = entries.length - 1; i <= len; i++) {
            var entry = entries[i];

            if (entry.intersectionRatio > 0) {
                observer.unobserve(entry.target);
                preloadBackgrounds(entry.target);
            }
        }
    }
})();
"use strict";
"use strict";
//# sourceMappingURL=common.min.js.map
